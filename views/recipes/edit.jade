extends ../layout

block content
  .angular(ng-controller="RecipeCtrl")
    h1= recipe.name
    //- p= recipe._id
    br
    form.form-inline(role="form")
      div.form-group
        label.sr-only(for="ingredient") Ingredient Name
        input.form-control(type="text",size="40",placeholder="Add Ingredient...",type-ahead)
    br
    div.row
      div.col-md-8
        table.table.table-bordered.table-striped
          tr
            th.col-sm-2 Qty
            th.col-sm-2 Measure
            th.col-sm-4 Ingredient
            th.col-sm-1 Cal
            th.col-sm-1 &nbsp;
          //- tr.success
          //-   td 
          //-     input(type="text",value="1",size="2")
          //-   td 
          //-     select
          //-       option cup
          //-       option tbsp
          //-   td Celery, raw 
          //-   td Y   
          //-   td 
          //-     button.btn.btn-default(type="submit") Save

          tr(ng-repeat="ing in recipe.ingredients")
            td 
              input(type="text",size="1",value="1")
              select(ng-options="fraction for fraction in fractions",
                     ng-model="ing.meta.qty",
                     ng-change="saveIng()")
                option(value="") -
            td 
              select(ng-options="measurement as measurement.name for measurement in measurements",
                     ng-model="ing.meta.unit",
                     ng-change="saveIng()"
                     )
                option(value="") -- unit --
            td {{ing.item_name}}
            td {{ing.nf_calories}}
            td [x]
    //- div
    //-   button.btn.btn-success(ng-click="save()") Save
    //- br  
    div
      a.btn.btn-primary(href="/recipes") Back to Recipes

  script.
    var recipe = !{JSON.stringify(recipe)};
    var fractions = !{JSON.stringify(fractions)};
    var measurements = !{JSON.stringify(measurements)};